<h1>Produtos</h1>
<hr>

<!-- ************************************ Produtos Físicos ******************************************** -->

<mat-tab-group mat-align-tabs="left">
    <mat-tab label="Produtos Físicos">
        <table mat-table [dataSource]="fonteProdutosFisicos" multiTemplateDataRows class="mat-elevation-z8">
            <!-- Id Column -->
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> Id </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>

            <!-- Nome Column -->
            <ng-container matColumnDef="nome">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.nome}} </td>
            </ng-container>

            <!-- Estoque Column -->
            <ng-container matColumnDef="estoque">
                <th mat-header-cell *matHeaderCellDef> Estoque </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.estoque}} </td>
            </ng-container>

            <!-- Data Criação Column -->
            <ng-container matColumnDef="created_at">
                <th mat-header-cell *matHeaderCellDef> Data Criação </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.created_at | date:'dd/MM/yyyy' }} </td>
            </ng-container>

            <!-- Ativo Column -->
            <ng-container matColumnDef="ativo">
                <th mat-header-cell *matHeaderCellDef> Ativo </th>
                <td mat-cell *matCellDef="let element">
                    <mat-slide-toggle (change)="ativarDesativarProduto(element)"
                        (click)="$event.stopPropagation()" [(ngModel)]="element.ativo"></mat-slide-toggle>
                </td>
            </ng-container>

            <!-- Ações Column -->
            <ng-container matColumnDef="acoes">
                <th mat-header-cell *matHeaderCellDef>Ações</th>
                <td mat-cell *matCellDef="let element">
                    <a class="cursor-pointer edit" (click)="dialogEditarProduto(element)">
                        <i class="material-icons">
                            edit
                        </i>
                    </a>
                    <a class="cursor-pointer delete" (click)="dialogExcluirProduto(element)">
                        <i class="material-icons">
                            delete
                        </i>
                    </a>
                </td>
            </ng-container>

            <!-- Accordian expandido -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
                    <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                        <app-card-produtos [imagens]="element.imagens" [descricao]="element.descricao">
                        </app-card-produtos>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="element-row"
                [class.expanded-row]="expandedElement === element"
                (click)="expandedElement = expandedElement === element ? null : element"></tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
        </table>

        <mat-paginator [length]="tamanhoPaginacaoFisico"
            [pageSize]="tamanhoPaginaFisico"
            [pageSizeOptions]="opcoesPaginacaoFisico"
            (page)="mudouPaginaFisico($event)">
        </mat-paginator>
    </mat-tab>

    <!-- ************************************ Produtos Digitais ******************************************** -->

    <mat-tab label="Produtos Digitais">
        <table mat-table [dataSource]="fonteProdutosDigitais" multiTemplateDataRows class="mat-elevation-z8">
            <!-- Nome Column -->
            <ng-container matColumnDef="nome">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.nome}} </td>
            </ng-container>

            <!-- Validade Column -->
            <ng-container matColumnDef="validade">
                <th mat-header-cell *matHeaderCellDef> Validade </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.validade}} dias
                </td>
            </ng-container>

            <!-- Data Criação Column -->
            <ng-container matColumnDef="created_at">
                <th mat-header-cell *matHeaderCellDef> Data Criação </th>
                <td class="cursor-pointer" mat-cell *matCellDef="let element"> {{element.created_at |
                    date:'dd/MM/yyyy'}} </td>
            </ng-container>

            <!-- Ativo Column -->
            <ng-container matColumnDef="ativo">
                <th mat-header-cell *matHeaderCellDef> Ativo </th>
                <td mat-cell *matCellDef="let element">
                    <mat-slide-toggle (change)="ativarDesativarProduto(element)"
                    (click)="$event.stopPropagation()" [(ngModel)]="element.ativo"></mat-slide-toggle>
                </td>
            </ng-container>

            <!-- Ações Column -->
            <ng-container matColumnDef="acoes">
                <th mat-header-cell *matHeaderCellDef>Ações</th>
                <td mat-cell *matCellDef="let element">
                    <a class="cursor-pointer edit" (click)="dialogEditarProduto(element)">
                        <i class="material-icons">
                            edit
                        </i>
                    </a>
                    <a class="cursor-pointer delete" (click)="dialogExcluirProduto(element)">
                        <i class="material-icons">
                            delete
                        </i>
                    </a>
                </td>
            </ng-container>

            <!-- Accordian expandido -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsDisplayed.length">
                    <div class="element-detail" [@detailExpand]="element == elementExpaned ? 'expanded' : 'collapsed'">
                        <app-card-produtos [imagens]="element.imagens" [descricao]="element.descricao">
                        </app-card-produtos>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsDisplayed"></tr>
            <tr mat-row *matRowDef="let element; columns: columnsDisplayed;" class="element-row"
                [class.expanded-row]="elementExpaned === element"
                (click)="elementExpaned = elementExpaned === element ? null : element"></tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
        </table>

        <mat-paginator [length]="tamanhoPaginacaoDigital"
               [pageSize]="tamanhoPaginaDigital"
               [pageSizeOptions]="opcoesPaginacaoDigital"
               (page)="mudouPaginaDigital($event)">
        </mat-paginator>
    </mat-tab>
</mat-tab-group>

<button mat-raised-button color="primary" (click)="dialogCadastrarProduto()">
    Cadastrar
</button>
